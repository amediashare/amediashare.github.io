!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.coreFramework=t():e.coreFramework=t()}(this,function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}({3:function(e,t,n){"use strict";n.r(t);const s=1048576;function i(e,t){this.fileName=e,this.BUFFER_SIZE=t||100*s,this.CacheBuffer=new Uint8Array(this.BUFFER_SIZE),this._usedLength=0,this.BeginPosInFile=0,this.detail=!1,this.count=1,this.t=0}i.prototype.flushCache=function(e){if(0===this._usedLength)return;let t=this.CacheBuffer.slice(0,this._usedLength),n=this.BeginPosInFile,s={type:"write",fileName:this.fileName,dataToBeWritten:t,offsetInFile:n};postMessage(s),this.BeginPosInFile+=this._usedLength,this._usedLength=0},i.prototype.debug=function(){this.t++},i.prototype.write=function(e,t,n){this.debug();let s=t.length,i=isNaN(n)?0:n,o=t;try{for(;o.length>0;){let t=0,s=o.length,r=this.BeginPosInFile+this._usedLength,a=i+s;if(0!==this._usedLength)if(this._usedLength===this.BUFFER_SIZE)this.flushCache(e);else if(r<i)this.flushCache(e);else if(!isNaN(n)&&i<this.BeginPosInFile)this.flushCache(e);else{let e=i-this.BeginPosInFile;isNaN(n)&&0===i||r===i?(e=this._usedLength,t=Math.min(this.BUFFER_SIZE-this._usedLength,s),this.CacheBuffer.set(o.subarray(0,t),e),this._usedLength+=t,i+=t):r<a?(t=this._usedLength-e,this.CacheBuffer.set(o.subarray(0,t),e),i+=t):a<r&&(t=s,this.CacheBuffer.set(o.subarray(0,t),e),this._usedLength=this._usedLength)}else this.BeginPosInFile=isNaN(n)?this.BeginPosInFile:i,t=Math.min(s,this.BUFFER_SIZE),this.CacheBuffer.set(o.subarray(0,t),this._usedLength),this._usedLength+=t;o=o.subarray(t)}}catch(e){console.log(e)}return s},i.prototype.close=function(e){this.flushCache(e);let t={type:"close",fileName:this.fileName};postMessage(t)};var o={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){o.reader||(o.reader=new FileReaderSync);let t=o.createNode(null,"/",o.DIR_MODE,0),n={};return Array.prototype.forEach.call(e.opts.files||[],function(e){o.createNode(function(e){let s=e.split("/"),i=t;for(var r=0;r<s.length-1;r++){let e=s.slice(0,r+1).join("/");n[e]||(n[e]=o.createNode(i,s[r],o.DIR_MODE,0)),i=n[e]}return i}(e),function(e){let t=e.split("/");return t[t.length-1]}(e),o.FILE_MODE,0,new i(e))}),t},close:function(e){e.node.contents.flushCache()},createNode:function(e,t,n,s,i,r){let a=FS.createNode(e,t,n);return a.mode=n,a.node_ops=o.node_ops,a.stream_ops=o.stream_ops,a.timestamp=(r||new Date).getTime(),n===o.FILE_MODE?(a.size=0,a.contents=i):(a.size=4096,a.contents={}),e&&(e.contents[t]=a),a},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){return e.contents[Object.keys(e.contents)[0]].contents[t]},mknod:function(e,t,n,s){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(e,t,n){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(e){let t=[".",".."];for(let n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(e,t,n,s,i){throw new FS.ErrnoError(ERRNO_CODES.EIO)},write:function(e,t,n,s,i){e.node.timestamp=Date.now();let o=new Uint8Array(t.buffer).slice(n,n+s);e.node.contents.write(e,o,NaN===i?NaN:i)},llseek:function(e,t,n){let s=t;if(1===n)s+=e.position;else if(2===n)throw new Error("SEEK_END: issued, can't support this");if(s<0)throw new fs.ErrnoError(EINVAL);return e.ungotten=[],e.position=s,s},close:function(e){e.node.contents.close(e)}}};let r;function a(e,t,n){return e=scriptDirectory+"core.wasm",(async()=>{let s=null;if(r)s=await WebAssembly.instantiate(r,t);else{let n=null,i=null;try{i=fetch(e,{mode:"cors",cache:"force-cache"}),console.log(i),n=await WebAssembly.instantiateStreaming(i,t)}catch(e){console.log(e)}n&&(r=r||n.module,s=n.instance)}s&&n(s)})(),{}}function u(e){postMessage({type:"stdout",data:e})}onmessage=function(e){let t=e.data;if("command"===t.type){let e={print:u,printErr:u,files:t.files||[],arguments:t.arguments||[],OutputfileSystem:t.OutputfileSystem&&"WriteFS"===t.OutputfileSystem?o:null,wasmBinaryFile:t.wasmBinaryFile?t.wasmBinaryFile:null,instantiateWasm:a};!async function(e,t){postMessage({type:"start",data:t.arguments.join(" ")}),postMessage({type:"stdout",data:"Received command: "+t.arguments.join(" ")});let n=Date.now(),s=e(t),i=await s.WaitDependAndRun(),o=Date.now()-n;postMessage({type:"stdout",data:"Finished processing (took "+o+"ms)"}),postMessage({type:"done",data:i,time:o}),s=null}(ffmpeg,e)}},postMessage({type:"ready"})}})});
//# sourceMappingURL=worker.js.map